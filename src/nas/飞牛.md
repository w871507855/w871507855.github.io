# 飞牛搭建各种服务
## 飞牛搭建mysql8

### 1. 创建mysql的目录
![image.png](https://img.gouwang.top/20260108103435.png)
### 2. 创建docker compose
路径选择刚才创建的目录
![image.png](https://img.gouwang.top/20260108103548.png)

### 3. 编写docker compose
- MYSQL_ROOT_PASSWORD是必填的root用户密码
- MYSQL_DATABASE，MYSQL_USER，MYSQL_PASSWORD是选填
```
version: "3.8"
services:
  mysql:
    image: mysql:8.0
    container_name: mysql8
    environment:
      MYSQL_ROOT_PASSWORD: xxx
      MYSQL_DATABASE: xxx
      MYSQL_USER: xxx
      MYSQL_PASSWORD: xxx
      TZ: Asia/Shanghai
    ports:
      - "13306:3306"
    volumes:
      - ./data:/var/lib/mysql
      - ./log:/var/log/mysql
      - ./conf.d:/etc/mysql/conf.d
      - /etc/localtime:/etc/localtime:ro
    restart: always
```

### 4. 点击确定后即可运行
- 修改docker compose中environment变量，需要先构建后再运行

## 飞牛搭建docker加速源
飞牛自身可以使用飞牛官方的docker加速源，局域网其他设备docker需要使用kspeeder来进行加速
### 1. 创建目录
![image.png](https://img.gouwang.top/20260108104154.png)
### 2. 创建docker compose
![image.png](https://img.gouwang.top/20260108104725.png)

### 3. 编写docker compose
- 5003是web页面访问端口
- 5443是docker加速源
```
services:
  kspeeder:
    image: registry.kspeeder.com/linkease/kspeeder:latest
    container_name: kspeeder
    ports:
      - "5443:5443"
      - "5003:5003"
    volumes:
      - ./kspeeder-data:/kspeeder-data
      - ./kspeeder-config:/kspeeder-config
    restart: unless-stopped
```
![image.png](https://img.gouwang.top/20260108104848.png)

### 4. 添加私有仓库加速源
修改/etc/docker/daemon.json
- 192.168.123.76为我飞牛的ip
- 5443是docker compose中设置的访问端口
```
"insecure-registries": ["192.168.123.76:5443"]
```
![image.png](https://img.gouwang.top/20260108105534.png)
